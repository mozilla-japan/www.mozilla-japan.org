<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>JavaScript 2.0 型</title>
<meta http-equiv="Content-Type" content="text/html;charset=EUC-JP">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<link rev="alternate" lang="en-us" href="http://www.mozilla.org/js/language/js20/libraries/types.html">
<link rel="stylesheet" href="../../styles.css">
<link rel="Start" href="../index.html">
<link rel="Contents" href="../index.html">
<link rel="Prev" href="index.html">
<link rel="Next" href="machine-types.html">
<script type="text/javascript" language="JavaScript1.2" src="../../unicodeCompatibility.js"></script>
<style type="text/css" media="screen,tv">
<!--
	body {
		font-family:Tahoma,sans-serif;
		font-size:90%;
	}
	table {
		font-size:100%;
	}
	div.clsTransFooter {
		background:#FFFFE0 none;
		font-size:80%;
		text-align:right;
		line-height:1.2em;
		margin-top:1em;
		padding:3px;
		border:1px dashed #996;
	}
	p, ul, ol {
		line-height:1.2em;
	}
	ins.clsByTranslator {
		color:#090;
		font-size:0.9em;
		text-decoration:none;
	}
	ins code {
		color:inherit;
		font-size:1.1em;
	}
-->
</style>
</head>

<body>
<table width="100%" border="0" cellspacing="2" cellpadding="0">
<tr>
  <td style="vertical-align:top;white-space:nowrap"><div class="title2"><span class="top-title">JavaScript 2.0</span></div>
    <div class="title2">ライブラリ</div>
    <div class="title1">型</div></td>
  <td style="text-align:right;vertical-align:top;white-space:nowrap"><a href="index.html"><img src="../../arrows/left.gif" width="37" height="37" alt="previous"></a><a href="../index.html"><img src="../../arrows/up.gif" width="37" height="37" alt="up"></a><a href="machine-types.html"><img src="../../arrows/right.gif" width="37" height="37" alt="next"></a></td>
</tr>
</table>

<p class="mod-date">2003/06/04 (Wed)</p>

<h2>定義済み型</h2>

<p>JavaScript 2.0 では以下の<a href="../core/concepts.html#type">型</a>が定義済みである:</p>

<div class="indent">
  <table border="1" cellspacing="1" cellpadding="1">
  <colgroup>
    <col align="left" valign="top" style="white-space:nowrap;">
    <col align="left" valign="top">
  </colgroup>
  <tr>
    <th>型</th>
    <th>値の集合</th>
  </tr>
  <tr>
    <td><a name="Never"></a><code>Never</code></td>
    <td>値は無い</td>
  </tr>
  <tr>
    <td><a name="Void"></a><code>Void</code></td>
    <td><code>undefined</code></td>
  </tr>
  <tr>
    <td><code>Null</code></td>
    <td><code>null</code></td>
  </tr>
  <tr>
    <td><code>Boolean&nbsp;&nbsp;</code></td>
    <td><code>true</code> と <code>false</code></td>
  </tr>
  <tr>
    <td style="vertical-align:top;white-space:nowrap"><a name="Integer"></a><code>Integer</code></td>
    <td style="vertical-align:top">+0.0 、&#8211;0.0 、+<script type="text/javascript">document.write(U_infin)</script>
      、&#8211;<script type="text/javascript">document.write(U_infin)</script> 、及び NaN を含む数学的に整数である IEEE 倍精度浮動小数点数</td>
  </tr>
  <tr>
    <td style="vertical-align:top;white-space:nowrap"><a name="Number"></a><code>Number</code></td>
    <td style="vertical-align:top">+0.0 、&#8211;0.0 、+<script type="text/javascript">document.write(U_infin)</script>
      、&#8211;<script type="text/javascript">document.write(U_infin)</script> 、及び NaN を含む IEEE 倍精度浮動小数点数</td>
  </tr>
  <tr>
    <td><a name="char"></a><code>char&nbsp;</code></td>
    <td>1文字の16ビット Unicode 文字</td>
  </tr>
  <tr>
    <td><a name="String"></a><code>String</code></td>
    <td><code>null</code> を含む変更不能な Unicode 文字列</td>
  </tr>
  <tr>
    <td><code>Function</code></td>
    <td><code>null</code> を含む全ての関数</td>
  </tr>
  <tr>
    <td><code>Array</code></td>
    <td><code>null</code> を含む全ての配列</td>
  </tr>
  <tr>
    <td><code>Type</code></td>
    <td><code>null</code> を含む全ての型</td>
  </tr>
  <tr>
    <td><a name="Object"></a><code>Object</code></td>
    <td><code>null</code> と <code>undefined</code> を含む全ての値</td>
  </tr>
  </table>
</div>

<p>JavaScript 1.5 とは異なりオブジェクトとプリミティブ値 (単純値)
の区別は無く、全ての値がメソッドを持つことができる。クラスの中にはその値が封印されている (sealed)
ものもあり、これらには動的プロパティの追加は認められない。ユーザ定義クラスについては <code>final</code>
<a href="../core/definitions.html#class-attributes">クラス修飾子</a>を使うことでプリミティブ値のような振る舞いを持たせることが可能である。</p>

<p>上に挙げた型名は予約語では<strong>ない</strong> 。これらはローカル変数やクラスメンバの名前として使用することができる。しかしながらこれらはグローバルスコープで定数として定義されているため、パッケージ内でグローバル変数名として使用することはできない。</p>

<p><code>Object</code> は全ての型の基底型であり、<code>Never</code> は全ての型の派生型である。<code>Never</code>
は、無限ループに落ち込むか常に例外を投げるために通常は値を返さない関数の戻り値の型を記述するのに有用である。<code>Never</code>
は変数や仮引数の型には使用できない。<code>Void</code> は、処理を返すことはできるが特に値を返さない関数の戻り値の型を記述するのに有用である。<span class="issue">「<a href="../rationale/miscellaneous.html#types">根拠</a>」も見よ。</span></p>

<p>数値リテラルは <code>Number</code> 型のメンバであり、整数値を保持する場合は <code>Integer</code>
型のメンバでもある。文字列リテラルは <code>String</code> 型のメンバである。<code>char</code> 型のリテラルは存在しない。<code>char</code>
値は明示的、もしくは暗黙の型変換によってのみ作成される。</p>

<p>式 <code>new&nbsp;</code><var>f</var> (<var>f</var> は関数) で作成されたオブジェクトは <code>Object</code> 型になる。</p>

<h3>ユーザ定義型</h3>

<p><code>class</code> 宣言で定義されたあらゆるクラスもまた、そのクラスと子孫クラスのインスタンスの集合を表す型である。これには定義済みクラスも含まれ
<code>Object</code> や <code>Date</code> なども全て型である。<code>null</code> はユーザ定義クラスのインスタンスである。<code>undefined</code>
がユーザ定義クラスのインスタンスになることはない。</p>

<h2>型の意味</h2>

<p>型は普通、変数に格納できるオブジェクトや関数の実引数として渡すことのできるオブジェクトの集合を制限するのに使用される。例えば次の宣言</p>

<pre>var x:Integer;</pre>

<p>は、変数 <code>x</code> に格納できる値を整数に制限している。</p>

<p>型宣言は変数の読み取りや、そのプロパティへのアクセスにおけるセマンティクスに影響を与えない。従って、例えば式 <code>new MyType()</code>
が <code>MyType</code> 型の値を返す限り、以下の2つのコード片は等価である。</p>

<pre>var x:MyType = new MyType();
x.foo();</pre>

<pre>var x = new MyType();
x.foo();</pre>

<p>これらのコード片が <code>MyType</code> クラス宣言内に書かれ、<code>foo</code> がそのクラスの非公開フィールドである場合でも、この等価性は常に成り立つ。当然、本当の型を注釈として追加してもプログラムの意味は変わらない。</p>

<h2>型式</h2>

<p>JavaScript 2.0 では型式と値式を構文的に区別しない。そのため型式は型として評価されるコンパイル時定数であれば何でも良い。</p>

<p>型は値でもあり (その型は <code>Type</code>)、式中での使用、変数への代入、関数へ渡すことなどが可能である。例えば次のコードは、</p>

<pre>const R:Type = Number;
function abs_val(x:R):R {
  return x&lt;0 ? -x : x;
}</pre>

<p>以下と等価である:</p>

<pre>function abs_val(x:Number):Number {
  return x&lt;0 ? -x : x;
}</pre>

<h2><a name="implicit-coercion"></a>暗黙の強制型変換</h2>

<p>暗黙の強制型変換は以下のような状況で起こり得る:</p>

<ul>
  <li>値 <var>v</var> を型 <var>t</var> の変数に代入したとき</li>
  <li>型 <var>t</var> の未初期化の変数を宣言したとき。この場合 <code>undefined</code> が型 <var>t</var> に暗黙の型変換される</li>
  <li>関数の型 <var>t</var> の仮引数に実引数として値 <var>v</var> を渡したとき</li>
  <li>型 <var>t</var> の値を返す関数が結果 <var>v</var> を返すとき</li>
</ul>

<p>いずれの場合でも、<var>v</var> <script type="text/javascript">document.write(U_isin)</script> <var>t</var> であれば <var>v</var>
の変換は起こらない。<var>v</var> <script type="text/javascript">document.write(U_notin)</script> <var>t</var> であれば、<var>t</var>
が値 <var>v</var> について<a href="../core/concepts.html#type">暗黙の型変換マッピング</a>を定義している場合に限ってマップされた
<var>v</var> が使用される。それ以外の場合はエラーになる。</p>

<h2><a name="explicit-coercion"></a>明示的な強制型変換</h2>

<p>明示的な強制型変換は暗黙のそれに比べてより積極的な型変換を行う。明示的な強制型変換を行うには、型を関数として使用し、変換する値を引数として渡す:</p>

<p class="syntax"><var>type</var><code>(</code><var>value</var><code>)</code></p>

<p>例えば <code>Integer(258.1)</code> は整数 <code>258</code> を返し、<code>String(2+2==4)</code> は文字列
<code>&quot;true&quot;</code> を返す。</p>

<p><var>value</var> が既に <var>type</var> のメンバであれば、明示的な強制型変換は <var>value</var> を変換せずに返す。<var>value</var>
が <var>type</var> に暗黙の強制型変換可能であれば、暗黙の強制型変換の結果を返す。それ以外の場合は <var>type</var>
の<a href="../core/concepts.html#type">明示的型変換マッピング</a>が使用される。</p>

<hr>
<table width="100%" border="0" cellspacing="2" cellpadding="0">
<tr>
  <td style="vertical-align:bottom;white-space:nowrap"><address><a href="mailto:waldemar@netscape.com">Waldemar Horwat</a><br>
    最終更新: 2003年6月4日 (水)</address></td>
  <td style="text-align:right;vertical-align:top;white-space:nowrap"><a href="index.html"><img src="../../arrows/left.gif" width="37" height="37" alt="previous"></a><a href="../index.html"><img src="../../arrows/up.gif" width="37" height="37" alt="up"></a><a href="machine-types.html"><img src="../../arrows/right.gif" width="37" height="37" alt="next"></a></td>
</tr>
</table>

<div class="clsTransFooter">
	訳者: exeal &lt;<a href="mailto:exeal@student.interq.or.jp">exeal@student.interq.or.jp</a>&gt;<br>
	<a href="http://www.mozilla.org/js/language/js20/libraries/types.html">このドキュメントのオリジナルは mozilla.org において英語で公布されています。</a><br>
この和訳は、利用者の利便のために <a href="http://www.mozilla-japan.org/jp/td/">Mozilla Japan 翻訳部門</a> によって提供されています。<br>
内容に関してご不明な点がありましたら <a href="mailto:webmaster&#64;mozilla-japan.org">webmaster</a> までお問い合わせください。
</div>

</body>
</html>
